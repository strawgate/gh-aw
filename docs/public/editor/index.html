<!DOCTYPE html>
<html lang="en" data-color-mode="auto" data-light-theme="light" data-dark-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>gh-aw Playground</title>
<link rel="icon" type="image/svg+xml" href="/gh-aw/favicon.svg" />
<link rel="stylesheet" href="https://unpkg.com/@primer/css@21/dist/primer.css">
<style>
/* ============================================================
   Minimal overrides — only what Primer CSS cannot handle
   ============================================================ */
html, body {
  height: 100%;
  overflow: hidden;
}

/* CodeMirror editor sizing */
.cm-editor {
  height: 100%;
  font-size: 13px;
}
.cm-editor .cm-scroller {
  overflow: auto;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
  line-height: 1.6;
}
.cm-editor .cm-gutters {
  font-size: 13px;
  line-height: 1.6;
}
.cm-editor.cm-focused {
  outline: none;
}

/* Draggable divider */
.divider {
  width: 5px;
  cursor: col-resize;
  flex-shrink: 0;
  z-index: 5;
  position: relative;
  background: var(--borderColor-default, var(--color-border-default));
  transition: background 180ms ease;
}
.divider::before {
  content: '';
  position: absolute;
  top: 0;
  left: -4px;
  right: -4px;
  bottom: 0;
}
.divider::after {
  content: '';
  width: 3px;
  height: 24px;
  border-radius: 2px;
  background: var(--fgColor-muted, var(--color-fg-muted));
  opacity: 0;
  transition: opacity 180ms ease;
  position: absolute;
  top: 50%;
  left: 1px;
  transform: translateY(-50%);
}
.divider:hover::after,
.divider.dragging::after {
  opacity: 0.5;
}
.divider:hover,
.divider.dragging {
  background: var(--fgColor-accent, var(--color-accent-fg));
}

/* Loading overlay & spinner */
.loading-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 100;
  background: var(--bgColor-default, var(--color-canvas-default));
  transition: opacity 300ms ease;
}
.loading-overlay.hidden {
  opacity: 0;
  pointer-events: none;
}
.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--borderColor-default, var(--color-border-default));
  border-top-color: var(--fgColor-accent, var(--color-accent-fg));
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin-bottom: 16px;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Status dot pulse */
.status-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: currentColor;
  flex-shrink: 0;
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.35; }
}

/* Responsive */
@media (max-width: 767px) {
  .panels-container { flex-direction: column !important; }
  .divider { width: 100%; height: 4px; cursor: row-resize; }
  .header-bar { gap: 8px !important; padding: 8px 12px !important; flex-wrap: wrap; height: auto !important; min-height: 48px !important; }
  .header-separator { display: none !important; }
}
</style>
</head>
<body class="color-bg-default color-fg-default">
<div class="d-flex flex-column" style="height: 100vh; width: 100vw;" id="app">
  <!-- Loading Overlay (hidden by default — editor is shown immediately) -->
  <div class="loading-overlay hidden" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <div class="f4 color-fg-muted mb-1">Loading gh-aw compiler...</div>
    <div class="f6 color-fg-subtle">Downloading WebAssembly module (~5 MB compressed)</div>
  </div>

  <!-- Header -->
  <header class="header-bar d-flex flex-items-center gap-3 px-3 color-bg-default border-bottom position-relative" style="height: 52px; min-height: 52px; z-index: 10;">
    <a class="d-flex flex-items-center gap-2 text-bold f5 color-fg-default no-underline flex-shrink-0" href="/gh-aw/" title="Back to docs">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0">
        <polyline points="4 17 10 11 4 5"></polyline>
        <line x1="12" y1="19" x2="20" y2="19"></line>
      </svg>
      <span>gh-aw Playground</span>
    </a>

    <div class="header-separator flex-shrink-0" style="width: 1px; height: 24px; background: var(--borderColor-default, var(--color-border-default));"></div>

    <select class="form-select select-sm color-bg-subtle" id="sampleSelect" style="max-width: 220px; font-size: 12px;">
      <option value="hello-world">Hello World</option>
      <option value="issue-triage">Issue Triage</option>
      <option value="ci-doctor">CI Doctor</option>
      <option value="contribution-check">Contribution Guidelines Checker</option>
      <option value="daily-repo-status">Daily Repo Status</option>
    </select>

    <div class="header-separator flex-shrink-0" style="width: 1px; height: 24px; background: var(--borderColor-default, var(--color-border-default));"></div>

    <span class="Label Label--accent d-inline-flex flex-items-center gap-1" id="statusBadge" data-status="loading">
      <span class="status-dot" id="statusDot"></span>
      <span id="statusText">Loading...</span>
    </span>

  </header>

  <!-- Error Banner -->
  <div class="flash flash-error d-none" id="errorBanner">
    <button class="flash-close" id="errorClose" type="button" aria-label="Dismiss">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.749.749 0 011.275.326.749.749 0 01-.215.734L9.06 8l3.22 3.22a.749.749 0 01-.326 1.275.749.749 0 01-.734-.215L8 9.06l-3.22 3.22a.751.751 0 01-1.042-.018.751.751 0 01-.018-1.042L6.94 8 3.72 4.78a.75.75 0 010-1.06z"/></svg>
    </button>
    <span class="text-mono f6" id="errorText"></span>
  </div>

  <!-- Warning Banner -->
  <div class="flash flash-warn d-none" id="warningBanner">
    <button class="flash-close" id="warningClose" type="button" aria-label="Dismiss">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.749.749 0 011.275.326.749.749 0 01-.215.734L9.06 8l3.22 3.22a.749.749 0 01-.326 1.275.749.749 0 01-.734-.215L8 9.06l-3.22 3.22a.751.751 0 01-1.042-.018.751.751 0 01-.018-1.042L6.94 8 3.72 4.78a.75.75 0 010-1.06z"/></svg>
    </button>
    <span class="text-mono f6" id="warningText"></span>
  </div>

  <!-- Main Panels -->
  <div class="panels-container d-flex flex-1" style="min-height: 0;" id="panels">
    <!-- Editor Panel -->
    <div class="d-flex flex-column" style="flex: 1 1 50%; min-width: 0; min-height: 0;" id="panelEditor">
      <div class="d-flex flex-items-center flex-justify-between px-3 py-2 color-bg-subtle border-bottom f6 text-bold text-uppercase color-fg-muted" style="letter-spacing: 0.5px; min-height: 36px; user-select: none;">
        <span class="d-flex flex-items-center gap-1">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" style="opacity: 0.6;">
            <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0114.25 15H1.75A1.75 1.75 0 010 13.25V2.75C0 1.784.784 1 1.75 1zm12.5 1.5H1.75a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V2.75a.25.25 0 00-.25-.25zM3 5.5a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5h-8.5A.75.75 0 013 5.5zm0 4a.75.75 0 01.75-.75h5.5a.75.75 0 010 1.5h-5.5A.75.75 0 013 9.5z"/>
          </svg>
          Workflow (.md)
        </span>
      </div>
      <div class="flex-1" style="min-height: 0; overflow: hidden;" id="editorMount"></div>
    </div>

    <div class="divider" id="divider"></div>

    <!-- Output Panel -->
    <div class="d-flex flex-column" style="flex: 1 1 50%; min-width: 0; min-height: 0;" id="panelOutput">
      <div class="d-flex flex-items-center flex-justify-between px-3 py-2 color-bg-subtle border-bottom f6 text-bold text-uppercase color-fg-muted" style="letter-spacing: 0.5px; min-height: 36px; user-select: none;">
        <span class="d-flex flex-items-center gap-1">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" style="opacity: 0.6;">
            <path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25Zm1.75-.25a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V1.75a.25.25 0 00-.25-.25Zm7.47 3.97a.75.75 0 011.06 0l2 2a.75.75 0 010 1.06l-2 2a.75.75 0 11-1.06-1.06L10.69 8 9.22 6.53a.75.75 0 010-1.06zm-3.44 0a.75.75 0 010 1.06L4.31 8l1.47 1.47a.75.75 0 01-1.06 1.06l-2-2a.75.75 0 010-1.06l2-2a.75.75 0 011.06 0z"/>
          </svg>
          Compiled Output (.lock.yml)
        </span>
      </div>
      <div class="flex-1" style="min-height: 0; overflow: hidden;" id="outputContainer">
        <div class="d-flex flex-items-center flex-justify-center color-fg-muted f5 p-4 text-center" style="height: 100%;" id="outputPlaceholder">
          Compiled YAML will appear here
        </div>
        <div id="outputMount" style="height: 100%; display: none;"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="d-flex flex-column flex-items-center gap-2 px-3 py-3 color-bg-default border-top f6" style="min-height: 60px;">
    <div class="d-flex flex-items-center gap-2 color-fg-muted flex-wrap flex-justify-center">
      <span>Made with</span>
      <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" style="color: #8b5cf6;">
        <path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/>
      </svg>
      <span>by</span>
      <a href="https://githubnext.com/" target="_blank" rel="noopener noreferrer" class="Link--primary">GitHub Next</a>
      <span>&amp;</span>
      <a href="https://www.microsoft.com/en-us/research/" target="_blank" rel="noopener noreferrer" class="Link--primary">Microsoft Research</a>
    </div>
    <div class="d-flex flex-items-center gap-2 color-fg-subtle flex-wrap flex-justify-center">
      <a href="https://docs.github.com/en/site-policy/github-terms/github-terms-of-service" target="_blank" rel="noopener noreferrer" class="Link--secondary">Terms</a>
      <span aria-hidden="true">·</span>
      <a href="https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement" target="_blank" rel="noopener noreferrer" class="Link--secondary">Privacy</a>
      <span aria-hidden="true">·</span>
      <a href="https://github.com/security" target="_blank" rel="noopener noreferrer" class="Link--secondary">Security</a>
    </div>
  </footer>
</div>

<script type="module" src="./editor.js"></script>
</body>
</html>
