---
title: GitHub Tokens
description: Comprehensive reference for all GitHub tokens used in gh-aw, including authentication, token precedence, and security best practices
sidebar:
  order: 650
disable-agentic-editing: true
---

import { Card, CardGrid } from '@astrojs/starlight/components';
import Video from '../../../components/Video.astro';

## Which token(s) do I need?

GitHub Actions automatically provides a default `GITHUB_TOKEN` that works for most workflows. However, depending on what your workflow needs to do, you may need additional tokens:

- **Cross-repo access or remote GitHub tools** – Add [`GH_AW_GITHUB_TOKEN`](#gh_aw_github_token)
- **Copilot engine and agent operations** – Add [`COPILOT_GITHUB_TOKEN`](#copilot_github_token)
- **GitHub Projects v2 operations** – Add [`GH_AW_PROJECT_GITHUB_TOKEN`](#gh_aw_project_github_token)
- **Assign Copilot agents to issues/PRs** – Add [`GH_AW_AGENT_TOKEN`](#gh_aw_agent_token)
- **MCP server with isolated permissions** (optional) – Add [`GH_AW_GITHUB_MCP_SERVER_TOKEN`](#gh_aw_github_mcp_server_token)

## How do I add tokens to my repository?

You can set up your tokens manually in the GitHub UI or use the CLI for a streamlined experience. Note that the CLI also provides commands to check existing secrets and validate token permissions.

### Adding tokens using the CLI

```bash
gh aw secrets set COPILOT_GITHUB_TOKEN --value "YOUR_COPILOT_PAT"
```

You can also check existing secrets with:

```bash
gh aw secrets bootstrap
```

You can validate token permissions and configuration with:

```bash
gh aw init --tokens --engine <engine>
```

### Adding tokens using the GitHub UI

1. Go to your repository on GitHub
2. Click on "Settings" → "Secrets and variables" → "Actions"
3. Click "New repository secret" and add the token name and value

<picture>
  <source media="(prefers-color-scheme: dark)" srcSet="/gh-aw/images/actions-secrets_dark.png" />
  <img alt="Repository secrets page showing configured tokens" src="/gh-aw/images/actions-secrets_light.png" />
</picture>

## Who owns the resource?

Ownership affects token requirements for repositories and Projects (v2). If the owner is your personal username, it is user-owned. If the owner is an organization, it is org-owned and managed with shared roles and access controls.

To confirm ownership, check the owner name and avatar at the top of the page or in the URL (`github.com/owner-name/...`). Clicking the owner takes you to a personal profile or an organization page, which confirms it instantly. Here are examples of both (left: user-owned, right: org-owned):

<CardGrid>
  <Card title="User-owned repository">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcSet="/gh-aw/images/user-owned_dark.png" />
      <img alt="User-owned repository example" src="/gh-aw/images/user-owned_light.png" />
    </picture>
    
    Avatar shows a personal profile icon, URL includes username
  </Card>

  <Card title="Organization-owned repository">
    <picture>
      <source media="(prefers-color-scheme: dark)" srcSet="/gh-aw/images/org-owned_dark.png" />
      <img alt="Organization-owned repository example" src="/gh-aw/images/org-owned_light.png" />
    </picture>
    
    Avatar shows organization icon, URL includes org name
  </Card>
</CardGrid>

## Token Reference

### `GITHUB_TOKEN`

**Automatically set** — GitHub Actions automatically provides this token with scoped access to the current repository.

**When to use**:

- Simple workflows that only interact with the current repository.
- Comments, labels, and issues in the same repository.

**Setup**:

- None. Provided by GitHub Actions for every workflow.

**Token precedence and fallback**:

`GH_AW_GITHUB_MCP_SERVER_TOKEN` -> `GH_AW_GITHUB_TOKEN` -> `GITHUB_TOKEN`.

**Notes**:

- Capabilities: read/write access to the current repository; permissions follow workflow `permissions:`.
- Limitations: no cross-repo access, cannot trigger workflows via API, cannot authenticate Copilot engine, not supported for remote GitHub MCP server mode.

---

### `GH_AW_GITHUB_TOKEN`

**Personal Access Token** — A fine-grained or classic PAT that enables cross-repo access and remote GitHub tools.

**When to use**:

- Cross-repository operations (accessing other repos).
- Remote GitHub tools mode (faster startup without Docker).
- Codex engine operations with GitHub MCP.
- Any workflow that needs to access multiple repositories.

**Setup**:

Create a [fine-grained PAT](https://github.com/settings/personal-access-tokens/new) with:

- Repository access:
  - Select specific repos or "All repositories"
- Permissions:
  - Contents: Read (minimum) or Read+Write (for PRs)
  - Issues: Read+Write (for issue operations)
  - Pull requests: Read+Write (for PR operations)

**Token precedence and fallback**:

`GH_AW_GITHUB_MCP_SERVER_TOKEN` -> `GH_AW_GITHUB_TOKEN` -> `GITHUB_TOKEN`

**Notes**:

- If you need to isolate GitHub MCP server permissions, set `GH_AW_GITHUB_MCP_SERVER_TOKEN`.


---

### `GH_AW_GITHUB_MCP_SERVER_TOKEN`

**Personal Access Token** — A specialized token for the GitHub MCP server that can override the standard token chain. Use this when you need different permission levels for MCP server operations versus other workflow operations.

**When to use**:

- You need different permission levels for MCP server vs. other operations.
- You want to isolate MCP server authentication from general workflow authentication.
- You are using remote GitHub MCP mode and need a token with specific scopes.

**Setup**:

Create a [fine-grained PAT](https://github.com/settings/personal-access-tokens/new) with:

- **Repository access**:
  - Select specific repos or "All repositories"
- **Repository permissions** (based on your GitHub tools usage):
  - Contents: Read (minimum for toolset: repos)
  - Issues: Read (for toolset: issues)
  - Pull requests: Read (for toolset: pull_requests)
  - Adjust based on the toolsets you configure in your workflow

Then configure in your workflow frontmatter:

```yaml wrap
permissions:
  contents: read
  issues: read

tools:
  github:
    mode: remote  # or "local" for Docker-based
    toolsets: [repos, issues, pull_requests]
    github-token: ${{ secrets.GH_AW_GITHUB_MCP_SERVER_TOKEN }}
```

Or add to repository secrets:

```bash wrap
gh aw secrets set GH_AW_GITHUB_MCP_SERVER_TOKEN --value "YOUR_MCP_PAT"
```

**Using GitHub App** (recommended for production):

For enhanced security with short-lived tokens, configure a GitHub App instead. There are two ways:

**Option 1: Direct configuration** (more control)

```yaml wrap
permissions:
  contents: read
  issues: read

tools:
  github:
    mode: remote
    toolsets: [repos, issues, pull_requests]
    app:
      app-id: ${{ vars.APP_ID }}
      private-key: ${{ secrets.APP_PRIVATE_KEY }}
      owner: "my-org"                    # Optional: defaults to current repo owner
      repositories: ["repo1", "repo2"]   # Optional: defaults to current repo only
```

**Option 2: Shared workflow** (recommended - centralized configuration)

Use the provided shared workflow for centralized configuration:

```yaml wrap
imports:
  - shared/github-mcp-app.md  # Provides APP_ID and APP_PRIVATE_KEY configuration

permissions:
  contents: read
  issues: read

tools:
  github:
    mode: remote
    toolsets: [repos, issues, pull_requests]
```

The shared workflow (`shared/github-mcp-app.md`) expects:
- **Repository Variable**: `APP_ID` - Your GitHub App ID
- **Repository Secret**: `APP_PRIVATE_KEY` - Your GitHub App private key

Set up repository variables and secrets:

```bash wrap
gh variable set APP_ID --body "123456"
gh aw secrets set APP_PRIVATE_KEY --value "$(cat path/to/private-key.pem)"
```

**How it works**:

At workflow start, a token is automatically minted with **permissions matching your job's `permissions:` field**. The token is passed to the GitHub MCP server and automatically revoked at workflow end (even on failure).

This is the same per-job narrowing behavior used by `safe-outputs.app:` - see the [Safe Outputs documentation](/gh-aw/reference/safe-outputs/#github-app-token-app) for a detailed explanation of how GitHub App tokens are narrowed per-job.

**Token precedence and fallback**:

`GH_AW_GITHUB_MCP_SERVER_TOKEN` -> `GH_AW_GITHUB_TOKEN` -> `GITHUB_TOKEN`.

**Notes**:

- The compiler automatically sets `GITHUB_MCP_SERVER_TOKEN` and passes it as `GITHUB_PERSONAL_ACCESS_TOKEN` (local/Docker) or an `Authorization: Bearer` header (remote).
- In most cases, you do not need to set this token separately. Use `GH_AW_GITHUB_TOKEN` instead.
- **GitHub App advantages**: Short-lived tokens (auto-revoked at workflow end), no credential rotation needed, automatic permission calculation, better auditability.
- **Per-job permission narrowing**: When using a GitHub App (via `tools.github.app:` or `safe-outputs.app:`), tokens are automatically narrowed to match the job's `permissions:` block. This means you can safely configure a broadly-permissioned GitHub App at the organization level, and each job will only receive the specific permissions it needs.
- If using a GitHub App for both safe-outputs and GitHub MCP server, you can configure them independently for different permission levels.
- Set the resource owner to the organization when the repository is organization-owned.
- `GITHUB_TOKEN` is not supported in remote mode. Use `GH_AW_GITHUB_TOKEN` or a GitHub App instead.

---

### `GH_AW_PROJECT_GITHUB_TOKEN`

**Personal Access Token** — A specialized token for [GitHub Projects](https://docs.github.com/en/issues/planning-and-tracking-with-projects/learning-about-projects/about-projects) operations, required because the default `GITHUB_TOKEN` cannot access the Projects API.

**When to use**:

- Any Projects operation (creating, updating, or reading project boards).
- Workflows that call `update-project`, `create-project-status-update` safe output.
- When you want to isolate Projects permissions from other workflow operations.

**Setup**:

The required token type depends on whether you're working with **user-owned** or **organization-owned** Projects:

**For User-owned Projects**:

<Video
  src="/gh-aw/videos/create-pat-user-project.mp4"
  caption="Creating a classic PAT for user-owned private projects"
  aspectRatio="16:9"
  silenced={true}
/>

You **must** use a **classic PAT** with the `project` scope. Fine-grained PATs do **not** work with user-owned Projects.

1. Create a [classic PAT](https://github.com/settings/tokens/new) with scopes:
   - `project` (required for user Projects)
   - `repo` (required if accessing private repositories)

**For Organization-owned Projects (v2)**:

<Video
  src="/gh-aw/videos/create-pat-org-project.mp4"
  caption="Creating a fine-grained PAT for organization-owned projects"
  aspectRatio="16:9"
  silenced={true}
/>

You can use either a classic PAT or a fine-grained PAT:

1. **Option A**: Create a **classic PAT** with `project` and `read:org` scopes:
   - `project` (required)
   - `read:org` (required for org Projects)
   - `repo` (required if accessing private repositories)

2. **Option B (recommended)**: Create a [fine-grained PAT](https://github.com/settings/personal-access-tokens/new) with:
   - **Repository access**: Select specific repos that will use the workflow
   - **Repository permissions**:
     - Contents: Read
     - Issues: Read (if needed for issue-triggered workflows)
     - Pull requests: Read (if needed for PR-triggered workflows)
   - **Organization permissions** (must be explicitly granted):
     - Projects: Read & Write (required for updating org Projects)
   - **Important**: You must explicitly grant organization access during token creation

3. **Option C**: Use a GitHub App with Projects: Read+Write permission

After creating your token, add it to repository secrets:

```bash wrap
gh aw secrets set GH_AW_PROJECT_GITHUB_TOKEN --value "YOUR_PROJECT_PAT"
```

**Token precedence and fallback**:

per-output -> workflow-level -> `GH_AW_PROJECT_GITHUB_TOKEN` -> `GITHUB_TOKEN`.

**Example configuration**:

```yaml wrap
---
# Option 1: Use GH_AW_PROJECT_GITHUB_TOKEN secret (recommended for org Projects)
# Just create the secret - no workflow config needed
---

# Option 2: Explicitly configure at safe-output level
safe-outputs:
  update-project:
    github-token: ${{ secrets.CUSTOM_PROJECT_TOKEN }}

# Option 3: Organization projects with GitHub tools integration
tools:
  github:
    toolsets: [default, projects]
    github-token: ${{ secrets.ORG_PROJECT_WRITE }}
safe-outputs:
  update-project:
    github-token: ${{ secrets.ORG_PROJECT_WRITE }}
```

**Notes**:

- For organization-owned projects, configure both GitHub tools and safe outputs with the same token.
- Default behavior: `update-project` is update-only. It will not create projects. If a project does not exist, the job fails with instructions to create it manually.
- The default `GITHUB_TOKEN` cannot be used for Projects v2 operations. Configure `GH_AW_PROJECT_GITHUB_TOKEN` or provide a custom token via `safe-outputs.update-project.github-token`.
- **GitHub Projects v2 PAT Requirements**:
  - **User-owned Projects**: Require a classic PAT with the `project` scope (plus `repo` if accessing private repos). Fine-grained PATs do not work with user-owned Projects.
  - **Organization-owned Projects**: Can use either a classic PAT with `project` + `read:org` scopes, or a fine-grained PAT with:
    - Repository access to specific repositories
    - Repository permissions: Contents: Read, Issues: Read, Pull requests: Read (as needed)
    - Organization permissions: Projects: Read & Write
    - Explicit organization access granted during token creation
  - **GitHub App**: Works for both user and org Projects with Projects: Read+Write permission.
- To opt-in to creating projects, the agent must include `create_if_missing: true` in its output, and the token must have sufficient permissions to create projects in the organization.
- Use `GH_AW_PROJECT_GITHUB_TOKEN` for Projects-specific isolation; use `GH_AW_GITHUB_TOKEN` if it already has Projects permissions and you do not need isolation.


---

### `COPILOT_GITHUB_TOKEN`

**Personal Access Token** — The recommended token for Copilot operations including the Copilot engine, agent sessions, and bot assignments.

**When to use**:

- `engine: copilot` workflows.
- `create-agent-session:` safe outputs.
- Assigning `copilot` as issue assignee.
- Adding `copilot` as PR reviewer.

**Setup**:

The required token type depends on whether you own the repository or an organization owns it:

**For User-owned Repositories**:

<Video
  src="/gh-aw/videos/create-pat-user-copilot.mp4"
  caption="Creating a fine-grained PAT for user-owned repositories with Copilot permissions"
  aspectRatio="16:9"
  silenced={true}
/>

1. Create a [fine-grained PAT](https://github.com/settings/personal-access-tokens/new) with:
   - **Resource owner**: Your user account
   - **Repository access**: "Public repositories" or select specific repos
     - **Note**: You should leave "Public repositories" enabled; otherwise, you will not have access to the Copilot Requests permission option.
   - **Permissions**: 
     - Copilot Requests: Read-only (required)

**For Organization-owned Repositories**:

<Video
  src="/gh-aw/videos/create-pat-org-copilot.mp4"
  caption="Creating a fine-grained PAT for organization-owned repositories with Copilot permissions"
  aspectRatio="16:9"
  silenced={true}
/>

When an organization owns the repository, you need a fine-grained PAT with organization-level permissions:

1. Create a [fine-grained PAT](https://github.com/settings/personal-access-tokens/new) with:
   - **Resource owner**: The organization that owns the repository
   - **Repository access**: Select the specific repositories that will use the workflow
   - **Repository permissions**:
     - Contents: Read (if needed for repository access)
     - Issues: Read (if needed for issue-triggered workflows)
     - Pull requests: Read (if needed for PR-triggered workflows)
   - **Organization permissions** (must be explicitly granted):
     - Members: Read-only (required)
     - GitHub Copilot Business: Read-only (required)
   - **Important**: You must explicitly grant organization access during token creation

2. Add to repository secrets:

```bash wrap
gh aw secrets set COPILOT_GITHUB_TOKEN --value "YOUR_COPILOT_PAT"
```

**Token precedence and fallback**:

per-output -> global safe-outputs -> workflow-level -> `COPILOT_GITHUB_TOKEN` -> `GH_AW_GITHUB_TOKEN` (legacy, deprecated).

**Notes**:

- For organization-owned repositories, the token must have both **Members: Read-only** and **GitHub Copilot Business: Read-only**.
- These organization permissions must be explicitly granted during token creation and may require administrator approval.
- `GITHUB_TOKEN` is not included in the fallback chain (lacks "Copilot Requests" permission). `COPILOT_CLI_TOKEN` and `GH_AW_COPILOT_TOKEN` are no longer supported as of v0.26+.


---

### `GH_AW_AGENT_TOKEN`

**Personal Access Token** — Primary token used by `assign-to-agent:` safe outputs to programmatically assign Copilot agents to issues or pull requests.

**When to use**:

- `assign-to-agent:` safe outputs.
- Programmatic agent assignment operations.

**Setup**:

The required token type and permissions depend on whether you own the repository or an organization owns it:

**For User-owned Repositories**:

1. Create a [fine-grained PAT](https://github.com/settings/personal-access-tokens/new) with:
   - **Resource owner**: Your user account
   - **Repository access**: "Public repositories" or select specific repos
   - **Repository permissions**:
     - Actions: Write
     - Contents: Write
     - Issues: Write
     - Pull requests: Write

**For Organization-owned Repositories**:

<Video
  src="/gh-aw/videos/create-pat-org-agent.mp4"
  caption="Creating a fine-grained PAT for organization-owned repositories with permissions for agent assignment"
  aspectRatio="16:9"
  silenced={true}
/>

When an organization owns the repository, you need a fine-grained PAT with the resource owner set to the organization:

1. Create a [fine-grained PAT](https://github.com/settings/personal-access-tokens/new) with:
   - **Resource owner**: The organization that owns the repository
   - **Repository access**: Select the specific repositories that will use the workflow
   - **Repository permissions**:
     - Actions: Write
     - Contents: Write
     - Issues: Write
     - Pull requests: Write
   - **Important**: You must set the resource owner to the organization during token creation

2. Add to repository secrets:

```bash wrap
gh aw secrets set GH_AW_AGENT_TOKEN --value "YOUR_AGENT_PAT"
```

**Token precedence and fallback**:

`GH_AW_AGENT_TOKEN` -> `GH_AW_GITHUB_TOKEN` -> `GITHUB_TOKEN`.

**Notes**:

**Two ways to assign Copilot agents**

There are two different methods for assigning GitHub Copilot agents to issues or pull requests. Both methods use the same token (`GH_AW_AGENT_TOKEN`) and GraphQL API to perform the assignment:

1. **Via `assign-to-agent` safe output**: Use when you need to programmatically assign agents to existing issues or PRs through workflow automation. This is a standalone operation that requires the token documented on this page.

```yaml
safe-outputs:
  assign-to-agent:
    name: "copilot"
    allowed: [copilot]
```

2. **Via `assignees` field in `create-issue`**: Use when creating new issues through workflows and want to assign the agent immediately. When `copilot` is in the assignees list, it is automatically filtered out and assigned via GraphQL in a separate step after issue creation (using the same token and API as method 1).

```yaml
safe-outputs:
  create-issue:
    assignees: copilot  # or assignees: [copilot, user1]
```

Both methods result in the same outcome as [manually assigning issues to Copilot through the GitHub UI](https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent/create-a-pr#assigning-an-issue-to-copilot). Method 2 is simpler when creating issues, while method 1 provides fine-grained control for existing issues.

**Technical implementation**: Both methods use the GraphQL `replaceActorsForAssignable` mutation to assign the `copilot-swe-agent` bot to issues or PRs. Both follow the token precedence and fallback behavior documented above.

See [GitHub's official documentation on assigning issues to Copilot](https://docs.github.com/en/copilot/concepts/agents/coding-agent/about-coding-agent) for more details on the Copilot coding agent.

**Resource owner requirements**: The token's resource owner must match the repository ownership:
- **User-owned repositories**: Use a token where the resource owner is your user account
- **Organization-owned repositories**: Use a token where the resource owner is the organization

This ensures the token has the appropriate permissions to assign agents to issues and pull requests in the repository.


---

### `GITHUB_MCP_SERVER_TOKEN`

**Automatically set** — Environment variable automatically set by gh-aw based on your GitHub tools configuration.

**When to use**:

- Do not configure manually.

**Setup**:

- None. Automatically managed by the gh-aw compiler.

**Token precedence and fallback**:

Derived from GitHub tools configuration and token fallback settings.

**Notes**:

- Configure tokens using `GH_AW_GITHUB_TOKEN`, `GH_AW_GITHUB_MCP_SERVER_TOKEN`, or workflow-level `github-token` instead.


---

## Related Documentation

- [Engines](/gh-aw/reference/engines/) - Engine-specific authentication
- [Safe Outputs](/gh-aw/reference/safe-outputs/) - Safe output token configuration
- [Tools](/gh-aw/reference/tools/) - Tool authentication and modes
- [Permissions](/gh-aw/reference/permissions/) - Permission model overview
